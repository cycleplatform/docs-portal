---
sidebar_label: Config
sidebar_position: 2
---
import CodeBlock from "@theme/CodeBlock"
import {DeployTable} from "../components/config/deploy/deploytable";
import {InstancesTable, MatchTable, StartsTable, StatefulExample} from "../components/config/deploy/stateful";

# Container Config
The container configuration allows for ultra granular access to network, deployment, runtime, resource, and itegration settings.


`Config Top Level`

| Field    | Type                                  | Required | Nullable | Description      |
|----------|---------------------------------------|:--------:|:--------:|------------------|
|network       | Object                                 |✅        | ❌       |Network access, ports, and hostnames. |
|deploy        | Object                                 |✅        | ❌       |Deployment configuration - notably instance counts, strategies, resources, and recovery configurations. |
|runtime       | Object                                 |❌        | ✅       |Runtime configuration including permissions, overrides to commands, and other post build runtime changes. |
|resources     | Object                                 |❌        | ✅       |Specifically resources limits and values for the instances of the container. |
|integrations  | Object                                 |❌        | ✅       |Container integrations, currently supporting advanced TLS settings. |


## Network

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|hostname | String                                 |✅        | ❌       |The container hostname used by Cycle's discovery service for DNS queries. |
|public   | String                                 |✅        | ❌       |the containers network setting for public internet - choices are `enable`, `disable`, `egress-only`. |
|ports    | String                                 |❌        | ❌       |an array of port mappings for the container. |


### Network Config Example
```json
{
  "hostname": "server",
  "public": "enable",
  "ports": ["80:80", "443:80"]
}
```

## Deploy

<DeployTable />


:::note Deployment Strategies
For a full breakdown of the different deployment strategies available click [here](https://docs.cycle.io/docs/containers/configuration/deployment)
.
:::


### Stateful
The stateful object holds a single key called `instances`.

`stateful:`

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|instances | Array                                 |✅        | ❌       | An array of instance objects which allow for granular control over each instance of a stateful container. |

### Instances

`instances:`
<InstancesTable />

#### Stateful Instance Match
The instance object describes the instance being targeted in the `match` object.  Currently, for each instance of a stateful container created, Cycle will look at the hostname and prepend a number (starting at 1) separated by a dot.

To match a stateful containers first instance, the user can simply use the hostname value `1.thecontainershostname`.
`match:`
<MatchTable />


#### Statful Instance Start Commands
`default`, `first`, and `auto` _start_ each have different use cases, but the object shape is consistent between them.

`starts:`
<StartsTable />

<CodeBlock className="language-json" >
    {StatefulExample}
</CodeBlock>

### Constraints
Constraints are used to add rules about when the corresponding container can be created and to which servers it can be deployed.

`constraints:`

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|node            | Object                          |❌        | ✅       |An object holding information constraining the list of possible servers the container instances can be deployed to. |
|containers      | Array                           |❌        | ❌       |An array of container identifiers that must exist before this container will be started. |

The containers array is a list of container identifiers that must exist before the given container will be sent the start signal.  The container identifiers existence does not guarantee the existence of the other identified containers just that their identifiers exist.


### Node

`node:`

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|tags      | Object                                |✅        | ❌       |An object holding two lists of tags. |


#### Node Tags
There are 2 types of node tags: `any` & `all`.

`tags:`

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|any       | Array                                 |✅        | ❌       |The `any` list of tags is satisfied if `any` of the tags from the list are present on a given server.. |
|all       | Array                                 |✅        | ❌       |The `all` list of tags is satisfied only if `all` of the tags from the list are present on a given server.. |


## Shutdown
The shutdown policy is an optional configuration that gives the user control over how the initial shutdown of the instance should be handled.

| Field    | Type                                  | Required | Nullable | Description      |
|----------|-------------------------------------  |:--------:|:--------:|------------------|
|graceful_timeout       | number                                 |✅        | ❌       |The `any` list of tags is satisfied if `any` of the tags from the list are present on a given server.. |
|all       | Array                                 |✅        | ❌       |The `all` list of tags is satisfied only if `all` of the tags from the list are present on a given server.. |
